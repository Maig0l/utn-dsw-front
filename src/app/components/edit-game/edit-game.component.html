<section>
  <h1>Edit Game ID: {{ id }}</h1>
  <form [formGroup]="updateForm" (submit)="updateGame()">
    <mat-form-field>
      <mat-label>Title:</mat-label>
      <input matInput type="text" id="title" formControlName="title" />
    </mat-form-field>

    <mat-form-field>
      <mat-label for="synopsis">Synopsis:</mat-label>
      <input matInput type="text" id="synopsis" formControlName="synopsis" />
    </mat-form-field>

    <mat-form-field>
      <mat-label for="releaseDate">Release date:</mat-label>
      <input
        matInput
        type="date"
        id="releaseDate"
        formControlName="releaseDate"
      />
    </mat-form-field>

    <mat-form-field>
      <mat-label for="portrait">Portrait:</mat-label>
      <input matInput type="text" id="portrait" formControlName="portrait" />
    </mat-form-field>

    <mat-form-field>
      <mat-label for="banner">Banner:</mat-label>
      <input matInput type="text" id="banner" formControlName="banner" />
    </mat-form-field>

    <div formArrayName="pictures">
      <div *ngFor="let picture of pictures2; let i = index">
        <mat-form-field>
          <mat-label for="pictures">Picture {{ i + 1 }}:</mat-label>
          <input
            matInput
            type="text"
            id="pictures-{{ i }}"
            formControlName="picture"
            value="{{ picture }}"
          />
        </mat-form-field>
        <img src="{{ picture }}" class="picture" />
      </div>
      <button mat-mini-fab type="button" (click)="addPictureInput()">
        <mat-icon>add</mat-icon>
      </button>
    </div>
    <mat-form-field>
      <mat-label for="franchise">Franchise ID:</mat-label>
      <input matInput type="text" id="franchise" formControlName="franchise" />
    </mat-form-field>

    <button mat-mini-fab aria-label="save game" type="submit" class="primary">
      <mat-icon>save</mat-icon>
    </button>
  </form>
</section>

<!-- REVISAR TODO ESTO>
<section>
  Tag search to add to the game...
  Work in progress...
  <form [formGroup]="searchTags"> < required (selectionChange)="displaySelectedTag()">
    <div class="outline" class="lookup-search-input-field">
      <input  type="text" formControlName="tagName" placeholder="Tag"> < (input)="searchTags()" o en el tuto dice (keyup)="onKey($event)" >
    </div>
    <div class="option" *ngFor="let lookup of tagsLookup">{{lookup.name}}</div> < revisar >
  </form>
</section-->

<section>
  <h1>Add Tag</h1>

  <mat-chip-set aria-label="Tags">
    @for (tag of gametags; track tag.id){
    <mat-chip>{{ tag.name }}</mat-chip>
    }
  </mat-chip-set>

  <div style="position: relative; width: 300px">
    <input
      type="text"
      [value]="inputValue"
      (input)="onInput($event)"
      (focus)="showDropdown = true"
      (blur)="onBlur()"
      style="width: 100%; padding: 8px; box-sizing: border-box"
    />

    <ul
      *ngIf="showDropdown && filteredOptions.length > 0"
      style="
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        max-height: 200px;
        overflow-y: auto;
        border: 1px solid #ccc;
        background: white;
        padding: 0;
        margin: 0;
        list-style: none;
        z-index: 10;
      "
    >
      <li
        *ngFor="let option of filteredOptions"
        (mousedown)="selectOption(option)"
        style="padding: 8px; cursor: pointer"
        [style.background]="option === hoveredOption ? '#f0f0f0' : 'white'"
        (mouseenter)="hoveredOption = option"
      >
        {{ option }}
      </li>
    </ul>
    <button (click)="addTag(inputValue)">Add</button>
  </div>
</section>
